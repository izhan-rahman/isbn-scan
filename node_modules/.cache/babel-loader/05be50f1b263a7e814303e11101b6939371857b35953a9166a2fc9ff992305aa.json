{"ast":null,"code":"var _jsxFileName = \"/Users/izhan/Documents/isbn-scanner/src/components/BarcodeScanner.js\",\n  _s = $RefreshSig$();\nimport { useEffect } from \"react\";\nimport { Html5Qrcode } from \"html5-qrcode\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function BarcodeScanner({\n  onDetected\n}) {\n  _s();\n  useEffect(() => {\n    const scanner = new Html5Qrcode(\"reader\");\n    const config = {\n      fps: 10,\n      // Scanning speed (frames per second)\n      qrbox: {\n        width: 250,\n        height: 250\n      },\n      // Scanner box size\n      disableFlip: true // Disable auto flip\n    };\n\n    // Start scanning from the device's camera\n    scanner.start({\n      facingMode: \"environment\"\n    },\n    // Use rear camera for better scanning\n    config, decodedText => {\n      // Handle decoded ISBN text\n      const isbn = decodedText.replace(/[^0-9X]/gi, ''); // Clean ISBN\n      if (isbn.startsWith(\"978\") || isbn.startsWith(\"979\")) {\n        scanner.stop(); // Stop scanning once ISBN is detected\n        onDetected(isbn); // Pass the ISBN to the parent component\n      }\n    }, error => {\n      // You can handle errors here (if needed)\n      console.error(\"Scanner error:\", error);\n    }).catch(err => {\n      console.error(\"âŒ Scanner start error:\", err);\n    });\n\n    // Cleanup on component unmount\n    return () => scanner.stop().catch(() => {});\n  }, [onDetected]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"reader\",\n      style: {\n        width: \"100%\",\n        borderRadius: \"10px\"\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"\\uD83D\\uDCF7 Scanning for ISBN...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 38,\n    columnNumber: 5\n  }, this);\n}\n_s(BarcodeScanner, \"OD7bBpZva5O2jO+Puf00hKivP7c=\");\n_c = BarcodeScanner;\nvar _c;\n$RefreshReg$(_c, \"BarcodeScanner\");","map":{"version":3,"names":["useEffect","Html5Qrcode","jsxDEV","_jsxDEV","BarcodeScanner","onDetected","_s","scanner","config","fps","qrbox","width","height","disableFlip","start","facingMode","decodedText","isbn","replace","startsWith","stop","error","console","catch","err","children","id","style","borderRadius","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/izhan/Documents/isbn-scanner/src/components/BarcodeScanner.js"],"sourcesContent":["import { useEffect } from \"react\";\r\nimport { Html5Qrcode } from \"html5-qrcode\";\r\n\r\nexport default function BarcodeScanner({ onDetected }) {\r\n  useEffect(() => {\r\n    const scanner = new Html5Qrcode(\"reader\");\r\n    const config = {\r\n      fps: 10, // Scanning speed (frames per second)\r\n      qrbox: { width: 250, height: 250 }, // Scanner box size\r\n      disableFlip: true, // Disable auto flip\r\n    };\r\n\r\n    // Start scanning from the device's camera\r\n    scanner.start(\r\n      { facingMode: \"environment\" }, // Use rear camera for better scanning\r\n      config,\r\n      (decodedText) => {\r\n        // Handle decoded ISBN text\r\n        const isbn = decodedText.replace(/[^0-9X]/gi, ''); // Clean ISBN\r\n        if (isbn.startsWith(\"978\") || isbn.startsWith(\"979\")) {\r\n          scanner.stop(); // Stop scanning once ISBN is detected\r\n          onDetected(isbn); // Pass the ISBN to the parent component\r\n        }\r\n      },\r\n      (error) => {\r\n        // You can handle errors here (if needed)\r\n        console.error(\"Scanner error:\", error);\r\n      }\r\n    ).catch((err) => {\r\n      console.error(\"âŒ Scanner start error:\", err);\r\n    });\r\n\r\n    // Cleanup on component unmount\r\n    return () => scanner.stop().catch(() => {});\r\n  }, [onDetected]);\r\n\r\n  return (\r\n    <div>\r\n      <div id=\"reader\" style={{ width: \"100%\", borderRadius: \"10px\" }} />\r\n      <p>ðŸ“· Scanning for ISBN...</p>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":";;AAAA,SAASA,SAAS,QAAQ,OAAO;AACjC,SAASC,WAAW,QAAQ,cAAc;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE3C,eAAe,SAASC,cAAcA,CAAC;EAAEC;AAAW,CAAC,EAAE;EAAAC,EAAA;EACrDN,SAAS,CAAC,MAAM;IACd,MAAMO,OAAO,GAAG,IAAIN,WAAW,CAAC,QAAQ,CAAC;IACzC,MAAMO,MAAM,GAAG;MACbC,GAAG,EAAE,EAAE;MAAE;MACTC,KAAK,EAAE;QAAEC,KAAK,EAAE,GAAG;QAAEC,MAAM,EAAE;MAAI,CAAC;MAAE;MACpCC,WAAW,EAAE,IAAI,CAAE;IACrB,CAAC;;IAED;IACAN,OAAO,CAACO,KAAK,CACX;MAAEC,UAAU,EAAE;IAAc,CAAC;IAAE;IAC/BP,MAAM,EACLQ,WAAW,IAAK;MACf;MACA,MAAMC,IAAI,GAAGD,WAAW,CAACE,OAAO,CAAC,WAAW,EAAE,EAAE,CAAC,CAAC,CAAC;MACnD,IAAID,IAAI,CAACE,UAAU,CAAC,KAAK,CAAC,IAAIF,IAAI,CAACE,UAAU,CAAC,KAAK,CAAC,EAAE;QACpDZ,OAAO,CAACa,IAAI,CAAC,CAAC,CAAC,CAAC;QAChBf,UAAU,CAACY,IAAI,CAAC,CAAC,CAAC;MACpB;IACF,CAAC,EACAI,KAAK,IAAK;MACT;MACAC,OAAO,CAACD,KAAK,CAAC,gBAAgB,EAAEA,KAAK,CAAC;IACxC,CACF,CAAC,CAACE,KAAK,CAAEC,GAAG,IAAK;MACfF,OAAO,CAACD,KAAK,CAAC,wBAAwB,EAAEG,GAAG,CAAC;IAC9C,CAAC,CAAC;;IAEF;IACA,OAAO,MAAMjB,OAAO,CAACa,IAAI,CAAC,CAAC,CAACG,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC;EAC7C,CAAC,EAAE,CAAClB,UAAU,CAAC,CAAC;EAEhB,oBACEF,OAAA;IAAAsB,QAAA,gBACEtB,OAAA;MAAKuB,EAAE,EAAC,QAAQ;MAACC,KAAK,EAAE;QAAEhB,KAAK,EAAE,MAAM;QAAEiB,YAAY,EAAE;MAAO;IAAE;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC,eACnE7B,OAAA;MAAAsB,QAAA,EAAG;IAAuB;MAAAI,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAG,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAC3B,CAAC;AAEV;AAAC1B,EAAA,CAvCuBF,cAAc;AAAA6B,EAAA,GAAd7B,cAAc;AAAA,IAAA6B,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}